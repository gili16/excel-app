{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\landa\\\\Documents\\\\\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD\\\\\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA \\u05D9\\u05D3\\\\react\\\\my-final-project\\\\src\\\\components\\\\TrackMap.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { GoogleMap, DirectionsRenderer } from '@react-google-maps/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapComponent = ({\n  track,\n  apiKey\n}) => {\n  _s();\n  const [directions, setDirections] = useState(null);\n  useEffect(() => {\n    const script = document.createElement('script');\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}`;\n    script.async = true;\n    script.onload = () => {\n      // Once the Google Maps API is loaded, proceed to fetch directions\n      fetchDirections();\n    };\n    document.body.appendChild(script);\n    return () => {\n      document.body.removeChild(script);\n    };\n  }, [apiKey]);\n  const fetchDirections = () => {\n    const directionsService = new google.maps.DirectionsService();\n    const waypoints = track.stops.map(stop => ({\n      location: new google.maps.LatLng(stop.x, stop.y),\n      stopover: true\n    }));\n    const origin = new google.maps.LatLng(track.startX, track.startY);\n    const destination = new google.maps.LatLng(track.endX, track.endY);\n    directionsService.route({\n      origin: origin,\n      destination: destination,\n      waypoints: waypoints,\n      travelMode: google.maps.TravelMode.DRIVING\n    }, (result, status) => {\n      if (status === google.maps.DirectionsStatus.OK) {\n        setDirections(result);\n      } else {\n        console.error(`Directions service failed due to ${status}`);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: '400px',\n      width: '100%'\n    },\n    children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n      center: {\n        lat: track.startX,\n        lng: track.startY\n      },\n      zoom: 10,\n      mapContainerStyle: {\n        height: '100%',\n        width: '100%'\n      },\n      children: directions && /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n        directions: directions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 24\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"glbi+cHuBQuc+RIS6xund7W8uRU=\");\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useEffect","useState","GoogleMap","DirectionsRenderer","jsxDEV","_jsxDEV","MapComponent","track","apiKey","_s","directions","setDirections","script","document","createElement","src","async","onload","fetchDirections","body","appendChild","removeChild","directionsService","google","maps","DirectionsService","waypoints","stops","map","stop","location","LatLng","x","y","stopover","origin","startX","startY","destination","endX","endY","route","travelMode","TravelMode","DRIVING","result","status","DirectionsStatus","OK","console","error","style","height","width","children","center","lat","lng","zoom","mapContainerStyle","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/landa/Documents/לימודים/תכנות יד/react/my-final-project/src/components/TrackMap.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { GoogleMap, DirectionsService, DirectionsRenderer } from '@react-google-maps/api';\r\n\r\ninterface Coordinate {\r\n  lat: number;\r\n  lng: number;\r\n}\r\n\r\ninterface Stop {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\ninterface Track {\r\n  startX: number;\r\n  startY: number;\r\n  endX: number;\r\n  endY: number;\r\n  stops: Stop[];\r\n}\r\n\r\ninterface MapProps {\r\n  track: Track;\r\n  apiKey: string;\r\n}\r\n\r\nconst MapComponent: React.FC<MapProps> = ({ track, apiKey }) => {\r\n  const [directions, setDirections] = useState<google.maps.DirectionsResult | null>(null);\r\n\r\n  useEffect(() => {\r\n    const script = document.createElement('script');\r\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}`;\r\n    script.async = true;\r\n    script.onload = () => {\r\n      // Once the Google Maps API is loaded, proceed to fetch directions\r\n      fetchDirections();\r\n    };\r\n    document.body.appendChild(script);\r\n\r\n    return () => {\r\n      document.body.removeChild(script);\r\n    };\r\n  }, [apiKey]);\r\n\r\n  const fetchDirections = () => {\r\n    const directionsService = new google.maps.DirectionsService();\r\n\r\n    const waypoints = track.stops.map(stop => ({\r\n      location: new google.maps.LatLng(stop.x, stop.y),\r\n      stopover: true,\r\n    }));\r\n\r\n    const origin = new google.maps.LatLng(track.startX, track.startY);\r\n    const destination = new google.maps.LatLng(track.endX, track.endY);\r\n\r\n    directionsService.route(\r\n      {\r\n        origin: origin,\r\n        destination: destination,\r\n        waypoints: waypoints,\r\n        travelMode: google.maps.TravelMode.DRIVING,\r\n      },\r\n      (result, status) => {\r\n        if (status === google.maps.DirectionsStatus.OK) {\r\n          setDirections(result);\r\n        } else {\r\n          console.error(`Directions service failed due to ${status}`);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div style={{ height: '400px', width: '100%' }}>\r\n      <GoogleMap center={{ lat: track.startX, lng: track.startY }} zoom={10} mapContainerStyle={{ height: '100%', width: '100%' }}>\r\n        {directions && <DirectionsRenderer directions={directions} />}\r\n      </GoogleMap>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapComponent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}