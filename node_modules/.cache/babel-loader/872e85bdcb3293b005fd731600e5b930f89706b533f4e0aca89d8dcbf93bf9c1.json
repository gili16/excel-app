{"ast":null,"code":"import { getUserByToken } from \"../services/user\";\nexport async function myTrack(track, user) {\n  const token = localStorage.getItem('user');\n  if (isValidToken(token)) {\n    let response = await fetch(`https://localhost:7090/api/Track/MyTracks/${user.id}`, {\n      headers: {\n        \"Authorization\": `Bearer ${token}`\n      }\n    });\n    if (response) {\n      let tracks = await response.json();\n      tracks.forEach(element => {\n        if (element.id === track.id) {\n          return true;\n        }\n      });\n    }\n  }\n  return false;\n}\nexport async function thisIsMe(user) {\n  const token = localStorage.getItem('user');\n  if (token !== null && token !== undefined && token !== '') {\n    let myUser = await (await getUserByToken(token)).json();\n    if (user !== undefined && user.id === myUser.id) {\n      return true;\n    }\n  }\n  return false;\n}\nexport function isValidToken(token) {\n  return token !== null && token !== undefined && token !== '';\n}\nexport function iAmLoggedIn(token, user) {\n  return token === null || token === undefined || token === '' || user === undefined || user === null;\n}","map":{"version":3,"names":["getUserByToken","myTrack","track","user","token","localStorage","getItem","isValidToken","response","fetch","id","headers","tracks","json","forEach","element","thisIsMe","undefined","myUser","iAmLoggedIn"],"sources":["C:/Users/landa/Documents/לימודים/תכנות יד/react/my-final-project/src/utils/authorizeAccess.uril.ts"],"sourcesContent":["\r\nimport { getTrackById, getTracks } from \"../services/track\";\r\nimport { getUserByToken } from \"../services/user\";\r\nimport { Track } from \"../types/Track\";\r\nimport { User } from \"../types/user.types\";\r\n\r\nexport async function myTrack(track:Track, user:User){\r\n    const token=localStorage.getItem('user')\r\n    if(isValidToken(token)){\r\n        let response=await fetch(`https://localhost:7090/api/Track/MyTracks/${user.id}`,{headers:{\"Authorization\": `Bearer ${token}`}});\r\n        if(response){\r\n            let tracks=await response.json() as Track[]\r\n            tracks.forEach(element => {\r\n                if(element.id===track.id){\r\n                    return true;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    return false;\r\n}\r\n\r\nexport async function thisIsMe(user:User|undefined){\r\n    const token=localStorage.getItem('user')\r\n    if(token!==null&&token!==undefined&&token!==''){\r\n        let myUser=await (await getUserByToken(token!)).json()\r\n        if(user!==undefined&&user.id===myUser.id){\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n\r\n}\r\n\r\nexport function isValidToken(token:string|null){\r\n    return token!==null&&token!==undefined&&token!=='';\r\n}\r\n\r\nexport function iAmLoggedIn(token:string|null|undefined, user:User|null|undefined){\r\n    return token===null||token===undefined||token===''||user===undefined||user===null;\r\n}"],"mappings":"AAEA,SAASA,cAAc,QAAQ,kBAAkB;AAIjD,OAAO,eAAeC,OAAOA,CAACC,KAAW,EAAEC,IAAS,EAAC;EACjD,MAAMC,KAAK,GAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EACxC,IAAGC,YAAY,CAACH,KAAK,CAAC,EAAC;IACnB,IAAII,QAAQ,GAAC,MAAMC,KAAK,CAAE,6CAA4CN,IAAI,CAACO,EAAG,EAAC,EAAC;MAACC,OAAO,EAAC;QAAC,eAAe,EAAG,UAASP,KAAM;MAAC;IAAC,CAAC,CAAC;IAC/H,IAAGI,QAAQ,EAAC;MACR,IAAII,MAAM,GAAC,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAY;MAC3CD,MAAM,CAACE,OAAO,CAACC,OAAO,IAAI;QACtB,IAAGA,OAAO,CAACL,EAAE,KAAGR,KAAK,CAACQ,EAAE,EAAC;UACrB,OAAO,IAAI;QACf;MACJ,CAAC,CAAC;IACN;EACJ;EAEA,OAAO,KAAK;AAChB;AAEA,OAAO,eAAeM,QAAQA,CAACb,IAAmB,EAAC;EAC/C,MAAMC,KAAK,GAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;EACxC,IAAGF,KAAK,KAAG,IAAI,IAAEA,KAAK,KAAGa,SAAS,IAAEb,KAAK,KAAG,EAAE,EAAC;IAC3C,IAAIc,MAAM,GAAC,MAAM,CAAC,MAAMlB,cAAc,CAACI,KAAM,CAAC,EAAES,IAAI,CAAC,CAAC;IACtD,IAAGV,IAAI,KAAGc,SAAS,IAAEd,IAAI,CAACO,EAAE,KAAGQ,MAAM,CAACR,EAAE,EAAC;MACrC,OAAO,IAAI;IACf;EACJ;EACA,OAAO,KAAK;AAEhB;AAEA,OAAO,SAASH,YAAYA,CAACH,KAAiB,EAAC;EAC3C,OAAOA,KAAK,KAAG,IAAI,IAAEA,KAAK,KAAGa,SAAS,IAAEb,KAAK,KAAG,EAAE;AACtD;AAEA,OAAO,SAASe,WAAWA,CAACf,KAA2B,EAAED,IAAwB,EAAC;EAC9E,OAAOC,KAAK,KAAG,IAAI,IAAEA,KAAK,KAAGa,SAAS,IAAEb,KAAK,KAAG,EAAE,IAAED,IAAI,KAAGc,SAAS,IAAEd,IAAI,KAAG,IAAI;AACrF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}