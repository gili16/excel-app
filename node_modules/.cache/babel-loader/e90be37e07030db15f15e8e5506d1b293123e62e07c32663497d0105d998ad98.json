{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\landa\\\\Documents\\\\\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD\\\\\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA \\u05D9\\u05D3\\\\react\\\\my-final-project\\\\src\\\\routes\\\\router.tsx\";\nimport React from 'react';\nimport { Navigate, createBrowserRouter } from \"react-router-dom\";\nimport Layout from \"../layouts/Layout\";\nimport HomePage from \"../pages/HomePage\";\nimport SignUpPage from '../pages/SignUpPage';\nimport TrackPage from '../pages/TracksPage';\nimport AddTrackPage from '../pages/AddTrackPage';\nimport MyTracksPage from '../pages/MyTracksPage';\nimport UpdateTrack from '../sections/UpdateTrack';\nimport { getMyTracks, getTrackByArea, getTrackById, getTrackByOption } from '../services/track';\nimport UpdateUser from '../sections/UpdateUser';\nimport { getUserByToken } from '../services/user';\nimport MyFavoritesPage from '../pages/MyFavoritesPage';\nimport AuthGuard from '../auth/AuthGuard';\nimport { isValidToken, setAuthorizationHeader } from '../auth/auth.utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const router = createBrowserRouter([{\n  path: '/',\n  element: /*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 18\n  }, this),\n  children: [{\n    path: '/',\n    element: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 26\n    }, this)\n  }, {\n    path: 'user/',\n    children: [{\n      path: 'myTracks/',\n      element: /*#__PURE__*/_jsxDEV(AuthGuard, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 34\n      }, this),\n      children: [{\n        path: '',\n        element: /*#__PURE__*/_jsxDEV(MyTracksPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 42\n        }, this),\n        loader: async () => {\n          let token = localStorage.getItem('user');\n          setAuthorizationHeader();\n          if (isValidToken(token)) {\n            try {\n              const response = await getUserByToken();\n              if (response) {\n                if (response.status === 401) {\n                  alert(\"you are not authorized\");\n                  return null;\n                } else {\n                  let id = response.data.id;\n                  try {\n                    const response2 = await getMyTracks(id);\n                    if (response2) {\n                      let res = response2.data;\n                      return res;\n                    } else {\n                      console.error('Failed to fetch picture');\n                    }\n                  } catch (error) {\n                    console.error('Error fetching picture:', error);\n                  }\n                }\n              } else {\n                console.error('Failed to fetch picture');\n              }\n            } catch (error) {\n              console.error('Error fetching picture:', error);\n            }\n          } else {\n            return null;\n          }\n        }\n      }, {\n        path: 'updateTrack/:id',\n        element: /*#__PURE__*/_jsxDEV(UpdateTrack, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 42\n        }, this),\n        loader: async ({\n          params\n        }) => {\n          const track = await getTrackById(Number(params.id));\n          return track;\n        }\n      }, {\n        path: 'addTrack',\n        element: /*#__PURE__*/_jsxDEV(AddTrackPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 42\n        }, this)\n      }]\n    }, {\n      path: 'favorites',\n      element: /*#__PURE__*/_jsxDEV(MyFavoritesPage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 34\n      }, this)\n    }, {\n      path: 'myProfile',\n      element: /*#__PURE__*/_jsxDEV(UpdateUser, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 34\n      }, this),\n      loader: async () => {\n        const token = localStorage.getItem('user');\n        let response = await getUserByToken();\n        return response.data;\n      }\n    }]\n  }, {\n    path: '/SignIn',\n    element: /*#__PURE__*/_jsxDEV(SignUpPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 26\n    }, this)\n  }, {\n    path: '/findTrack',\n    element: /*#__PURE__*/_jsxDEV(TrackPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 26\n    }, this),\n    loader: async () => {\n      let tracks = await getTrackByArea(\"north\");\n      return tracks;\n    }\n  }, {\n    path: '/findTrack/:option',\n    element: /*#__PURE__*/_jsxDEV(TrackPage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 26\n    }, this),\n    loader: async ({\n      params\n    }) => {\n      let tracks = [];\n      if (params.option !== \"\" && params.option !== undefined && params.option !== null) {\n        tracks = await getTrackByOption(params.option);\n      } else {\n        tracks = await getTrackByArea(\"north\");\n      }\n      return tracks;\n    }\n  }]\n}, {\n  path: '*',\n  element: /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 18\n  }, this)\n}]);","map":{"version":3,"names":["React","Navigate","createBrowserRouter","Layout","HomePage","SignUpPage","TrackPage","AddTrackPage","MyTracksPage","UpdateTrack","getMyTracks","getTrackByArea","getTrackById","getTrackByOption","UpdateUser","getUserByToken","MyFavoritesPage","AuthGuard","isValidToken","setAuthorizationHeader","jsxDEV","_jsxDEV","router","path","element","fileName","_jsxFileName","lineNumber","columnNumber","children","loader","token","localStorage","getItem","response","status","alert","id","data","response2","res","console","error","params","track","Number","tracks","option","undefined","to"],"sources":["C:/Users/landa/Documents/לימודים/תכנות יד/react/my-final-project/src/routes/router.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate as BigNav, Navigate, createBrowserRouter, useNavigate } from \"react-router-dom\";\r\nimport Layout from \"../layouts/Layout\";\r\nimport HomePage from \"../pages/HomePage\";\r\nimport SignUpForm from '../sections/SignUpForm';\r\nimport SignUpPage from '../pages/SignUpPage';\r\nimport TrackPage from '../pages/TracksPage';\r\nimport MyTracks from '../sections/MyTracks';\r\nimport AddTrackPage from '../pages/AddTrackPage';\r\nimport MyTracksPage from '../pages/MyTracksPage';\r\nimport UpdateTrack from '../sections/UpdateTrack';\r\nimport { getMyTracks, getTrackByArea, getTrackById, getTrackByOption, getTracks } from '../services/track';\r\nimport UpdateUser from '../sections/UpdateUser';\r\nimport { getUser, getUserByToken } from '../services/user';\r\nimport MyFavoritesPage from '../pages/MyFavoritesPage';\r\nimport { Track } from '../types/Track';\r\nimport { useSelector } from 'react-redux';\r\nimport { selectUser } from '../redux/user/user.selector';\r\nimport { backHome } from '../utils/backHome.util';\r\nimport AuthGuard from '../auth/AuthGuard';\r\nimport { isValidToken, setAuthorizationHeader } from '../auth/auth.utils';\r\nimport { getOptionById } from '../utils/Mapper';\r\nexport const router = createBrowserRouter([\r\n    {\r\n        path: '/',\r\n        element: <Layout />,\r\n        children: [\r\n            {\r\n                path: '/',\r\n                element: <HomePage />,\r\n            },\r\n\r\n            {\r\n                path: 'user/',\r\n                children: [\r\n\r\n                    {\r\n                        path: 'myTracks/',\r\n                        element: <AuthGuard />,\r\n                        children: [\r\n                            {\r\n                                path: '',\r\n                                element: <MyTracksPage />,\r\n                                loader: async () => {\r\n                                    let token = localStorage.getItem('user')\r\n                                    setAuthorizationHeader()\r\n                                    if (isValidToken(token)) {\r\n                                        try {\r\n                                            const response = await getUserByToken()\r\n                                            if (response) {\r\n                                                if (response.status === 401) {\r\n                                                    alert(\"you are not authorized\")\r\n                                                    return null;\r\n                                                } else {\r\n                                                    let id = response.data.id\r\n                                                    try {\r\n                                                        const response2 = await getMyTracks(id);\r\n                                                        if (response2) {\r\n                                                            let res =  response2.data\r\n                                                            return res;\r\n\r\n                                                        } else {\r\n                                                            console.error('Failed to fetch picture');\r\n                                                        }\r\n                                                    } catch (error) {\r\n                                                        console.error('Error fetching picture:', error);\r\n                                                    }\r\n                                                }\r\n                                            } else {\r\n                                                console.error('Failed to fetch picture');\r\n                                            }\r\n                                        } catch (error) {\r\n                                            console.error('Error fetching picture:', error);\r\n                                        }\r\n\r\n\r\n                                    } else {\r\n                                        return null;\r\n                                    }\r\n                                }\r\n                            },\r\n                            {\r\n                                path: 'updateTrack/:id',\r\n                                element: <UpdateTrack />,\r\n                                loader: async ({ params }) => {\r\n                                    const track = await getTrackById(Number(params.id!))\r\n                                    return track\r\n\r\n                                },\r\n                            },\r\n                            {\r\n                                path: 'addTrack',\r\n                                element: <AddTrackPage />\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        path: 'favorites',\r\n                        element: <MyFavoritesPage />,\r\n\r\n                    },\r\n                    {\r\n                        path: 'myProfile',\r\n                        element: <UpdateUser />,\r\n                        loader: async () => {\r\n                            const token = localStorage.getItem('user')\r\n                            let response = await getUserByToken()\r\n                            return response.data;\r\n                        }\r\n                    }\r\n\r\n                ]\r\n            },\r\n            {\r\n                path: '/SignIn',\r\n                element: <SignUpPage />\r\n            },\r\n            {\r\n                path: '/findTrack',\r\n                element: <TrackPage />,\r\n                loader: async () => {\r\n                    let tracks = await getTrackByArea(\"north\");\r\n                    return tracks\r\n                }\r\n            },\r\n            {\r\n                path: '/findTrack/:option',\r\n                element: <TrackPage />,\r\n                loader: async ({ params }) => {\r\n                    let tracks = [] as Track[];\r\n\r\n                    if (params.option !== \"\" && params.option !== undefined && params.option !== null) {\r\n                        tracks = await getTrackByOption(params.option);\r\n                         \r\n                    } else {\r\n                        tracks = await getTrackByArea(\"north\");\r\n                    }\r\n                    return tracks;\r\n                }\r\n            }\r\n\r\n\r\n        ]\r\n    },\r\n\r\n    {\r\n        path: '*',\r\n        element: <Navigate to=\"/\" />,\r\n    },\r\n\r\n]);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}