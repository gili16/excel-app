{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\landa\\\\Documents\\\\\\u05DC\\u05D9\\u05DE\\u05D5\\u05D3\\u05D9\\u05DD\\\\\\u05EA\\u05DB\\u05E0\\u05D5\\u05EA \\u05D9\\u05D3\\\\react\\\\my-final-project\\\\src\\\\pages\\\\TracksPage.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport TrackFind from \"../sections/TrackFind.section\";\nimport { useLoaderData } from \"react-router-dom\";\nimport { getTrackByArea, getTrackByText } from \"../services/track\";\nimport { getLevelById } from \"../utils/Mapper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TrackPage() {\n  _s();\n  const [desc, setDesc] = useState(undefined);\n  const [filter, setFilter] = useState(undefined);\n  const data = useLoaderData();\n  const [tracks, setTracks] = useState([]);\n  useEffect(() => {\n    setTracks(data);\n  }, []);\n  useEffect(() => {\n    if (desc !== undefined) {\n      loadByDesc();\n    }\n  }, [desc]);\n  useEffect(() => {\n    if (filter !== undefined) {\n      loadByFilter();\n    }\n  }, [filter]);\n  async function loadByDesc() {\n    let temp = await getTrackByText(desc);\n    setTracks([...temp]);\n    setDesc(undefined);\n  }\n  async function loadByFilter() {\n    let temp = await getTrackByArea(filter.area);\n    // setTracks([...temp])\n    setFilter(undefined);\n    let filtered = [...temp.map(value => {\n      let flag = true;\n      if (filter !== undefined && filter !== null) {\n        if (filter.level !== undefined && filter.level !== \"\" && getLevelById(value.levelId) !== filter.level) {\n          return false;\n        }\n      }\n    })];\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(TrackFind, {\n      tracks: tracks,\n      setDesc: setDesc,\n      setFilter: setFilter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n_s(TrackPage, \"Q6JRQbEaV3G0BsqWXIjlhn7d7IA=\", false, function () {\n  return [useLoaderData];\n});\n_c = TrackPage;\nvar _c;\n$RefreshReg$(_c, \"TrackPage\");","map":{"version":3,"names":["useEffect","useState","TrackFind","useLoaderData","getTrackByArea","getTrackByText","getLevelById","jsxDEV","_jsxDEV","Fragment","_Fragment","TrackPage","_s","desc","setDesc","undefined","filter","setFilter","data","tracks","setTracks","loadByDesc","loadByFilter","temp","area","filtered","map","value","flag","level","levelId","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/landa/Documents/לימודים/תכנות יד/react/my-final-project/src/pages/TracksPage.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport TrackFind from \"../sections/TrackFind.section\";\r\nimport { Filter } from \"../types/Filter.types\";\r\nimport { useLoaderData } from \"react-router-dom\";\r\nimport { Track } from \"../types/Track\";\r\nimport { getTrackByArea, getTrackByText } from \"../services/track\";\r\nimport { getLevelByDescription, getLevelById } from \"../utils/Mapper\";\r\n\r\nexport default function TrackPage(){\r\n    const [desc,setDesc]=useState<string|undefined>(undefined)\r\n    const[filter,setFilter]=useState<Filter|undefined>(undefined)\r\n    const data:any=useLoaderData()\r\n    const [tracks,setTracks]=useState<Track[]>([])\r\n    useEffect(()=>{\r\n        setTracks(data)\r\n    },[])\r\n    useEffect(()=>{\r\n        if(desc!==undefined){\r\n            loadByDesc();\r\n        }\r\n    },[desc])\r\n    useEffect(()=>{\r\n        if(filter!==undefined){\r\n            loadByFilter();\r\n        }\r\n    },[filter])\r\n    async function loadByDesc(){\r\n        let temp=await getTrackByText(desc!)\r\n        setTracks([...temp])\r\n        setDesc(undefined)\r\n    }\r\n    async function loadByFilter(){\r\n        let temp=await getTrackByArea(filter!.area)\r\n        // setTracks([...temp])\r\n        setFilter(undefined)\r\n        let filtered=[...temp!.map((value:Track)=>{\r\n            let flag=true;\r\n            if(filter!==undefined&&filter!==null){\r\n                if(filter.level!==undefined&&filter.level!==\"\"&&getLevelById(value.levelId)!==filter.level){\r\n                    return false\r\n                }\r\n            }\r\n        })]\r\n    }\r\n    return <>\r\n    <TrackFind tracks={tracks} setDesc={setDesc} setFilter={setFilter}/>\r\n    </>\r\n}"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,SAAS,MAAM,+BAA+B;AAErD,SAASC,aAAa,QAAQ,kBAAkB;AAEhD,SAASC,cAAc,EAAEC,cAAc,QAAQ,mBAAmB;AAClE,SAAgCC,YAAY,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEtE,eAAe,SAASC,SAASA,CAAA,EAAE;EAAAC,EAAA;EAC/B,MAAM,CAACC,IAAI,EAACC,OAAO,CAAC,GAACb,QAAQ,CAAmBc,SAAS,CAAC;EAC1D,MAAK,CAACC,MAAM,EAACC,SAAS,CAAC,GAAChB,QAAQ,CAAmBc,SAAS,CAAC;EAC7D,MAAMG,IAAQ,GAACf,aAAa,CAAC,CAAC;EAC9B,MAAM,CAACgB,MAAM,EAACC,SAAS,CAAC,GAACnB,QAAQ,CAAU,EAAE,CAAC;EAC9CD,SAAS,CAAC,MAAI;IACVoB,SAAS,CAACF,IAAI,CAAC;EACnB,CAAC,EAAC,EAAE,CAAC;EACLlB,SAAS,CAAC,MAAI;IACV,IAAGa,IAAI,KAAGE,SAAS,EAAC;MAChBM,UAAU,CAAC,CAAC;IAChB;EACJ,CAAC,EAAC,CAACR,IAAI,CAAC,CAAC;EACTb,SAAS,CAAC,MAAI;IACV,IAAGgB,MAAM,KAAGD,SAAS,EAAC;MAClBO,YAAY,CAAC,CAAC;IAClB;EACJ,CAAC,EAAC,CAACN,MAAM,CAAC,CAAC;EACX,eAAeK,UAAUA,CAAA,EAAE;IACvB,IAAIE,IAAI,GAAC,MAAMlB,cAAc,CAACQ,IAAK,CAAC;IACpCO,SAAS,CAAC,CAAC,GAAGG,IAAI,CAAC,CAAC;IACpBT,OAAO,CAACC,SAAS,CAAC;EACtB;EACA,eAAeO,YAAYA,CAAA,EAAE;IACzB,IAAIC,IAAI,GAAC,MAAMnB,cAAc,CAACY,MAAM,CAAEQ,IAAI,CAAC;IAC3C;IACAP,SAAS,CAACF,SAAS,CAAC;IACpB,IAAIU,QAAQ,GAAC,CAAC,GAAGF,IAAI,CAAEG,GAAG,CAAEC,KAAW,IAAG;MACtC,IAAIC,IAAI,GAAC,IAAI;MACb,IAAGZ,MAAM,KAAGD,SAAS,IAAEC,MAAM,KAAG,IAAI,EAAC;QACjC,IAAGA,MAAM,CAACa,KAAK,KAAGd,SAAS,IAAEC,MAAM,CAACa,KAAK,KAAG,EAAE,IAAEvB,YAAY,CAACqB,KAAK,CAACG,OAAO,CAAC,KAAGd,MAAM,CAACa,KAAK,EAAC;UACvF,OAAO,KAAK;QAChB;MACJ;IACJ,CAAC,CAAC,CAAC;EACP;EACA,oBAAOrB,OAAA,CAAAE,SAAA;IAAAqB,QAAA,eACPvB,OAAA,CAACN,SAAS;MAACiB,MAAM,EAAEA,MAAO;MAACL,OAAO,EAAEA,OAAQ;MAACG,SAAS,EAAEA;IAAU;MAAAe,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC;EAAC,gBAClE,CAAC;AACP;AAACvB,EAAA,CAvCuBD,SAAS;EAAA,QAGdR,aAAa;AAAA;AAAAiC,EAAA,GAHRzB,SAAS;AAAA,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}