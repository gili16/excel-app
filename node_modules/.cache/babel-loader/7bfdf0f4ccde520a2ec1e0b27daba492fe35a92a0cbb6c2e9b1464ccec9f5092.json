{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect } from \"react\";\nimport { useAppDispatch } from \"../redux/store\";\nimport { isValidToken, setAuthorizationHeader } from \"./auth.utils\";\nimport { setInitialize, setUser } from \"../redux/user/user.slice\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function InitializeAuth({\n  children\n}) {\n  _s();\n  const dispatch = useAppDispatch();\n  useEffect(() => {\n    loadGetSession();\n  }, []);\n  async function loadGetSession() {\n    const authUser = (await getS) - ession();\n    console.log(authUser);\n    // if (authUser !== null) {\n    if (authUser !== null && authUser !== void 0 && authUser.token && isValidToken(authUser.token)) {\n      dispatch(setUser(authUser.user));\n      setAuthorizationHeader(authUser.token);\n    }\n    dispatch(setInitialize());\n    // }\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n}\n_s(InitializeAuth, \"DKdeqxp2QYw2p6z8/ErYMRK/Ubo=\", false, function () {\n  return [useAppDispatch];\n});\n_c = InitializeAuth;\nvar _c;\n$RefreshReg$(_c, \"InitializeAuth\");","map":{"version":3,"names":["useEffect","useAppDispatch","isValidToken","setAuthorizationHeader","setInitialize","setUser","Fragment","_Fragment","jsxDEV","_jsxDEV","InitializeAuth","children","_s","dispatch","loadGetSession","authUser","getS","ession","console","log","token","user","_c","$RefreshReg$"],"sources":["C:/Users/landa/Documents/לימודים/תכנות יד/react/my-final-project/src/auth/InitializeAuth.tsx"],"sourcesContent":["import { ReactNode, useEffect } from \"react\"\r\nimport { useAppDispatch } from \"../redux/store\"\r\nimport { AuthUser } from \"../types/user.types\"\r\nimport { getSession, isValidToken, setAuthorizationHeader } from \"./auth.utils\"\r\nimport { setInitialize, setUser } from \"../redux/user/user.slice\"\r\n\r\ntype Props = {\r\n    children: ReactNode\r\n}\r\n\r\nexport default function InitializeAuth({ children }: Props) {\r\n    const dispatch = useAppDispatch();\r\n    useEffect(() => {\r\n        loadGetSession();\r\n    }, [])\r\n    async function loadGetSession() {\r\n\r\n        const authUser: AuthUser | null = await getS-ession()\r\n        console.log(authUser)\r\n        // if (authUser !== null) {\r\n            if (authUser?.token && isValidToken(authUser.token)) {\r\n                dispatch(setUser(authUser.user))\r\n                setAuthorizationHeader(authUser.token)\r\n            }\r\n            dispatch(setInitialize())\r\n        // }\r\n    }\r\n    return <>{children}</>\r\n}"],"mappings":";AAAA,SAAoBA,SAAS,QAAQ,OAAO;AAC5C,SAASC,cAAc,QAAQ,gBAAgB;AAE/C,SAAqBC,YAAY,EAAEC,sBAAsB,QAAQ,cAAc;AAC/E,SAASC,aAAa,EAAEC,OAAO,QAAQ,0BAA0B;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAMjE,eAAe,SAASC,cAAcA,CAAC;EAAEC;AAAgB,CAAC,EAAE;EAAAC,EAAA;EACxD,MAAMC,QAAQ,GAAGZ,cAAc,CAAC,CAAC;EACjCD,SAAS,CAAC,MAAM;IACZc,cAAc,CAAC,CAAC;EACpB,CAAC,EAAE,EAAE,CAAC;EACN,eAAeA,cAAcA,CAAA,EAAG;IAE5B,MAAMC,QAAyB,GAAG,OAAMC,IAAI,IAACC,MAAM,CAAC,CAAC;IACrDC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAAC;IACrB;IACI,IAAIA,QAAQ,aAARA,QAAQ,eAARA,QAAQ,CAAEK,KAAK,IAAIlB,YAAY,CAACa,QAAQ,CAACK,KAAK,CAAC,EAAE;MACjDP,QAAQ,CAACR,OAAO,CAACU,QAAQ,CAACM,IAAI,CAAC,CAAC;MAChClB,sBAAsB,CAACY,QAAQ,CAACK,KAAK,CAAC;IAC1C;IACAP,QAAQ,CAACT,aAAa,CAAC,CAAC,CAAC;IAC7B;EACJ;EACA,oBAAOK,OAAA,CAAAF,SAAA;IAAAI,QAAA,EAAGA;EAAQ,gBAAG,CAAC;AAC1B;AAACC,EAAA,CAlBuBF,cAAc;EAAA,QACjBT,cAAc;AAAA;AAAAqB,EAAA,GADXZ,cAAc;AAAA,IAAAY,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}